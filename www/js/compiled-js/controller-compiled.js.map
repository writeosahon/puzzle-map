{"version":3,"sources":["controller.js"],"names":[],"mappings":"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","file":"controller-compiled.js","sourcesContent":["/**\r\n * Created by UTOPIA SOFTWARE on 26/7/2018.\r\n */\r\n\r\n/**\r\n * file defines all View-Models, Controllers and Event Listeners used by the app\r\n *\r\n * The 'utopiasoftware_app_namespace' namespace variable has being defined in the base js file.\r\n * The author uses the terms 'method' and function interchangeably; likewise the terms 'attribute' and 'property' are\r\n * also used interchangeably\r\n */\r\n\r\n// define the controller namespace\r\nutopiasoftware[utopiasoftware_app_namespace].controller = {\r\n\r\n\r\n    /**\r\n     * method contains the stratup/bootstrap code needed to initiate app logic execution\r\n     */\r\n    startup: function(){\r\n\r\n        // initialise the app libraries and plugins\r\n        ons.ready(async function () {\r\n            // set the default handler for the app\r\n            ons.setDefaultDeviceBackButtonListener(function(){\r\n                // does nothing for now!!\r\n            });\r\n\r\n            // create the view-reports-additional menu popover\r\n            // await ons.createPopover(\"view-reports-additional-menu-popover-template\");\r\n\r\n            // displaying prepping message\r\n            $('#loader-modal-message').html(\"Loading App...\");\r\n            $('#loader-modal').get(0).show(); // show loader\r\n\r\n            if(true){ // there is a previous logged in user\r\n                // load the app main page\r\n                $('ons-splitter').get(0).content.load(\"app-main-template\");\r\n            }\r\n            else{ // there is no previously logged in user\r\n                // load the login page\r\n                $('ons-splitter').get(0).content.load(\"login-template\");\r\n            }\r\n\r\n            // START ALL CORDOVA PLUGINS CONFIGURATIONS\r\n            try{\r\n                // lock the orientation of the device to 'PORTRAIT'\r\n                screen.orientation.lock('portrait');\r\n            }\r\n            catch(err){}\r\n\r\n            try{\r\n                await new Promise(function(resolve, reject){\r\n                    // Hide system UI and keep it hidden\r\n                    AndroidFullScreen.immersiveMode(resolve, reject);\r\n                });\r\n            }\r\n            catch(err){}\r\n\r\n            try { // START ALL THE CORDOVA PLUGINS CONFIGURATION WHICH REQUIRE PROMISE SYNTAX\r\n            }\r\n            catch(err){\r\n                console.log(\"APP LOADING ERROR\", err);\r\n            }\r\n            finally{\r\n                 // set status bar color\r\n                 StatusBar.backgroundColorByHexString(\"#363E7C\");\r\n                 navigator.splashscreen.hide(); // hide the splashscreen\r\n                 utopiasoftware[utopiasoftware_app_namespace].model.isAppReady = true; // flag that app is fully loaded and ready\r\n            }\r\n\r\n        }); // end of ons.ready()\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * this is the view-model/controller for the Sample Puzzle page\r\n     */\r\n    samplePuzzlePageViewModel: {\r\n\r\n        /**\r\n         * event is triggered when page is initialised\r\n         */\r\n        pageInit: function(event){\r\n\r\n            var $thisPage = $(event.target); // get the current page shown\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // call the function used to initialise the app page if the app is fully loaded\r\n            loadPageOnAppReady();\r\n\r\n            //function is used to initialise the page if the app is fully ready for execution\r\n            async function loadPageOnAppReady(){\r\n                // check to see if onsen is ready and if all app loading has been completed\r\n                if(!ons.isReady() || utopiasoftware[utopiasoftware_app_namespace].model.isAppReady === false){\r\n                    setTimeout(loadPageOnAppReady, 500); // call this function again after half a second\r\n                    return;\r\n                }\r\n\r\n                // listen for the back button event\r\n                $('#app-main-navigator').get(0).topPage.onDeviceBackButton =\r\n                    utopiasoftware[utopiasoftware_app_namespace].controller.samplePuzzlePageViewModel.backButtonClicked;\r\n\r\n                //todo\r\n                new Draggable.Droppable([...$('#sample-puzzle-page .puzzle-pieces-container').get()], {\r\n                    draggable: 'img.puzzle-pieces',\r\n                    scrollable: {\r\n                        sensitivity: 30,\r\n                        scrollableElements: [...$('#sample-puzzle-page .puzzle-pieces-carousel').get()]\r\n                    },\r\n                    mirror: {\r\n                        constrainDimensions: false,\r\n                        appendTo: 'body'\r\n                    },\r\n                    dropzone: $('#sample-puzzle-page .puzzle-drop-zone').get()\r\n                }).on(\"droppable:dropped\", function(droppableDroppedEvent){\r\n                    console.log(\"DROP ZONE\", droppableDroppedEvent.dropzone);\r\n\r\n                    let jqueryDropZone = $(droppableDroppedEvent.dropzone);\r\n                    let puzzleSlotValue = null;\r\n\r\n                    if(jqueryDropZone.is('.puzzle-pieces-tray')){\r\n                        jqueryDropZone.isPuzzlePieceTray = true;\r\n                        // get the puzzle slot value attached to the puzzle piece of the puzzle-pieces-tray\r\n                        puzzleSlotValue = $('.puzzle-pieces', jqueryDropZone).attr('data-puzzle-slot');\r\n                    }\r\n                    else{\r\n                        // get the puzzle slot value attached to the puzzle-drop-zone\r\n                        puzzleSlotValue = jqueryDropZone.attr('data-puzzle-slot');\r\n                    }\r\n\r\n                    // remove all animation classes from the puzzle piece\r\n                    $(`.puzzle-pieces[data-puzzle-slot=\"${puzzleSlotValue}\"]`, $thisPage).\r\n                    removeClass(\"animated shake tada\");\r\n\r\n                    if(jqueryDropZone.isPuzzlePieceTray !== true){\r\n                        if(jqueryDropZone.attr('data-puzzle-slot') ===\r\n                            $('.puzzle-pieces', jqueryDropZone).attr('data-puzzle-slot')){\r\n\r\n                            $(`.puzzle-pieces[data-puzzle-slot=\"${puzzleSlotValue}\"]`, $thisPage).\r\n                            addClass(\"animated tada\");\r\n                        }\r\n                        else{\r\n                            $(`.puzzle-pieces[data-puzzle-slot=\"${puzzleSlotValue}\"]`, $thisPage).\r\n                            addClass(\"animated shake\");\r\n                        }\r\n                    }\r\n\r\n                });\r\n\r\n\r\n                $('#loader-modal').get(0).hide(); // hide loader\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is shown\r\n         */\r\n        pageShow: function(){\r\n            // disable the swipeable feature for the app splitter\r\n            $('ons-splitter-side').removeAttr(\"swipeable\");\r\n\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            //window.SoftInputMode.set('adjustPan'); // let the window/view-port 'pan' when the soft keyboard is displayed\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when page is hidden\r\n         */\r\n        pageHide: function(){\r\n            // adjust the window/view-port settings for when the soft keyboard is displayed\r\n            // window.SoftInputMode.set('adjustResize'); // let the view 'resize' when the soft keyboard is displayed\r\n        },\r\n\r\n        /**\r\n         * method is triggered when page is destroyed\r\n         */\r\n        pageDestroy: function(){\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * method is triggered when the device back button is clicked OR a similar action is triggered\r\n         */\r\n        async backButtonClicked(){\r\n\r\n            // check if the side menu is open\r\n            if($('ons-splitter').get(0).right.isOpen){ // side menu open, so close it\r\n                $('ons-splitter').get(0).right.close();\r\n                return; // exit the method\r\n            }\r\n\r\n            ons.notification.confirm('Do you want to close the app?', {title: 'Exit App',\r\n                buttonLabels: ['No', 'Yes'], modifier: 'utopiasoftware-alert-dialog'}) // Ask for confirmation\r\n                .then(function(index) {\r\n                    if (index === 1) { // OK button\r\n                        navigator.app.exitApp(); // Close the app\r\n                    }\r\n                });\r\n        }\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\n"]}